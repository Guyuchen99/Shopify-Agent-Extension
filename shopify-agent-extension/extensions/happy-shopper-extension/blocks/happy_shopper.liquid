{{ 'tailwind.build.css' | asset_url | stylesheet_tag }}

<div class="shopify-agent-container fixed bottom-7 right-10 z-50">
  <!-- Floating Agent Bubble -->
  <div class="shopify-agent-bubble flex h-36 w-36 cursor-pointer items-center justify-center overflow-hidden bg-transparent transition-transform hover:scale-105">
    <img
      src="{{ 'agent_icon.jpg' | asset_url }}"
      alt="Shopify Agent Icon"
      class="animate-glowing h-3/4 w-3/4 rounded-full border border-gray-200 object-cover"
      width="112px"
      height="112px"
    >
  </div>

  <!-- Chat Window -->
  <div class="shopify-agent-window shadow-drop-center pointer-events-none absolute bottom-full right-0 z-50 mb-1 flex h-[550px] w-[375px] flex-col overflow-hidden rounded-2xl border border-{{ block.settings.agent_theme_color }}-600 bg-gradient-to-b from-{{ block.settings.agent_theme_color }}-200 via-white opacity-100 shadow-xl backdrop-blur-3xl transition-all duration-200 gap-0">
    <!-- Header -->
    <div class="shopify-agent-header flex items-center justify-between border-b border-{{ block.settings.agent_theme_color }}-600 bg-{{ block.settings.agent_theme_color }}-500 gap-0 p-4 font-semibold">
      <div class="flex items-center gap-2">
        <img
          src="https://p1.hiclipart.com/preview/801/155/669/bag-icon-line-icon-shopify-icon-social-icon-transparent-icon-electric-blue-symbol-number-logo-png-clipart.jpg"
          alt="Shopify Agent"
          class="h-8 w-8"
          width="32px"
          height="32px"
        >
        <span class="text-lg font-semibold text-white">Shopify Agent</span>
      </div>

      <div class="-mr-2 flex justify-between gap-0">
        <button
          type="button"
          class="shopify-agent-options m-0 flex h-8 w-8 cursor-pointer items-center justify-center text-white"
          aria-label="More Options"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="22"
            height="22"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-ellipsis-icon lucide-ellipsis hover:scale-110"
          >
            <circle
              cx="12"
              cy="12"
              r="1" />
            <circle
              cx="19"
              cy="12"
              r="1" />
            <circle
              cx="5"
              cy="12"
              r="1" />
          </svg>
        </button>
        <button
          type="button"
          class="shopify-agent-close m-0 flex h-8 w-8 cursor-pointer items-center justify-center text-white"
          aria-label="Close Chat"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="22"
            height="22"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-x-icon lucide-x hover:scale-110"
          >
            <path d="M18 6 6 18" />
            <path d="m6 6 12 12" />
          </svg>
        </button>
      </div>
    </div>

    <!-- Messages -->
    <div class="shopify-agent-messages flex flex-1 flex-col gap-3 overflow-y-auto p-4"></div>

    <!-- Input -->
    <div class="shopify-agent-input flex items-center border-t border-{{ block.settings.agent_theme_color }}-600 px-4 py-3">
      <div class="relative flex-1">
        <!-- Input -->
        <input
          type="text"
          placeholder="Ask me anything..."
          class="peer w-full rounded-2xl border-2 border-{{ block.settings.agent_theme_color }}-400 bg-{{ block.settings.agent_theme_color }}-100 py-3 pl-10 pr-20 text-sm text-gray-800 outline-none focus:border-{{ block.settings.agent_theme_color }}-600"
        >

        <button
          type="button"
          class="absolute left-2 top-1/2 flex h-8 w-8 -translate-y-1/2 cursor-pointer items-center justify-center text-{{ block.settings.agent_theme_color }}-400 hover:text-{{ block.settings.agent_theme_color }}-600 peer-focus:text-{{ block.settings.agent_theme_color }}-600"
          aria-label="Add"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-plus-icon lucide-plus hover:scale-110"
          >
            <path d="M5 12h14" />
            <path d="M12 5v14" />
          </svg>
        </button>

        <button
          type="button"
          class="shopify-agent-send absolute right-2 top-1/2 flex h-8 w-8 -translate-y-1/2 cursor-pointer items-center justify-center text-{{ block.settings.agent_theme_color }}-400 hover:text-{{ block.settings.agent_theme_color }}-600 peer-focus:text-{{ block.settings.agent_theme_color }}-600"
          aria-label="Send message"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-send-icon lucide-send hover:scale-110"
          >
            <path d="M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z" />
            <path d="m21.854 2.147-10.94 10.939" />
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>

<script>
  window.ShopifyAgentConfig = {
    THEME_COLOR: '{{ block.settings.agent_theme_color }}',
  };
</script>

<script src="{{ 'agent.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "AI Agent",
  "target": "body",
  "settings": [
    {
      "type": "select",
      "id": "agent_theme_color",
      "label": "Agent Theme Color",
      "default": "violet",
      "options": [
        {
          "value": "red",
          "label": "red"
        },
        {
          "value": "orange",
          "label": "orange"
        },
        {
          "value": "lime",
          "label": "lime"
        },
        {
          "value": "green",
          "label": "green"
        },
        {
          "value": "teal",
          "label": "teal"
        },
        {
          "value": "cyan",
          "label": "cyan"
        },
        {
          "value": "blue",
          "label": "blue"
        },
        {
          "value": "indigo",
          "label": "indigo"
        },
        {
          "value": "violet",
          "label": "violet"
        },
        {
          "value": "purple",
          "label": "purple"
        },
        {
          "value": "fuchsia",
          "label": "fuchsia"
        },
        {
          "value": "pink",
          "label": "pink"
        }
      ]
    }
  ],
  "enabled_on": {
    "templates": ["*"]
  }
}
{% endschema %}
