{{ 'tailwind.build.css' | asset_url | stylesheet_tag }}

<div class="shopify-agent-container fixed bottom-16 right-16 z-50">
  <!-- Floating Agent Bubble -->
  <div
    class="shopify-agent-bubble h-36 w-36 cursor-pointer overflow-hidden rounded-full shadow-lg transition-transform hover:scale-105"
  >
    <img
      src="{{ 'agent_icon.jpg' | asset_url }}"
      alt="Shopify Agent Icon"
      class="block h-full w-full rounded-full object-cover"
      width="144x"
      height="144px"
    >
  </div>

  <!-- Chat Window -->
  <div
    class="shopify-agent-window pointer-events-none absolute bottom-full right-0 z-50 mb-4 flex h-[425px] w-[325px] flex-col overflow-hidden rounded-3xl border border-black bg-white opacity-0 shadow-xl transition-all duration-200"
  >
    <!-- Header -->
    <div
      class="shopify-agent-header flex flex-none items-center justify-between border-b border-black px-6 py-4 text-3xl font-semibold text-black"
    >
      <span>Shopify Agent</span>
      <button
        type="button"
        class="shopify-agent-close cursor-pointer border-none p-0 leading-none text-gray-600 hover:text-black"
        aria-label="Close Chat"
      >
        âœ•
      </button>
    </div>

    <!-- Messages -->
    <div class="shopify-agent-messages flex flex-1 flex-col gap-4 overflow-y-auto p-6">
      <!-- messages will go here -->
    </div>

    <!-- Input -->
    <div class="shopify-agent-input flex flex-none items-center gap-4 border-t border-black px-6 py-4">
      <input
        type="text"
        placeholder="Ask me anything..."
        class="flex-1 rounded-3xl border-2 border-gray-500 px-4 py-4 text-xl outline-none focus:border-violet-500 focus:ring-0"
      >
      <button
        type="button"
        class="shopify-agent-send flex h-10 w-10 cursor-pointer items-center justify-center text-violet-700"
        aria-label="Send message"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          aria-hidden="true"
        >
          <line x1="22" y1="2" x2="11" y2="13"></line>
          <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
        </svg>
      </button>
    </div>
  </div>
</div>

<script src="{{ 'agent.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "AI Agent",
  "target": "body",
  "settings": [
    {
      "type": "color",
      "id": "agent_bubble_color",
      "label": "Agent Bubble Color",
      "default": "#5046e4"
    },
    {
      "type": "text",
      "id": "agent_welcome_message",
      "label": "Agent Welcome Message",
      "default": "ðŸ‘‹ Hi there! How can I help you today?"
    }
  ],
  "enabled_on": {
    "templates": ["*"]
  }
}
{% endschema %}
